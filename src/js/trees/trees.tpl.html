<main ng-controller="TreesCtrl as TreesCtrl">

<div ng-include="'js/trees/action.tpl.html'" ng-if="data.mode()=='trees' && auth.is('customer')"></div>

<div class="trees-container" ng-show="data.mode()=='trees'">
	<div class="trees-container-inner">
		<div class="row row-nopad">
			<div class="col-sm-3 col">
				<div class="filters-container">
					<left-column-filters-section></left-column-filters-section>
				</div>	
			</div>	
			<div class="col-sm-9 col">				
				<div class="row row-nopad">
					
					<div class="col-sm-8 col">
						<div class="content-container">

                            <div class="admin-filter-container" ng-if="data.mode()=='trees' && auth.isAtleast('inventory')">
                                <center-top-block></center-top-block>
                            </div>

							<!-- begin center content area -->
							<section class="map-container mainContent top-margin-none {{'mode_'+data.mode()}}" ng-class="'mode_' + data.mode()">
								<div id='treeDetails' ng-cloak ng-show="data.showTreeDetails && data.mode()=='trees'">
                                    <tree-edit></tree-edit>
								</div>

                                <map-search-panel></map-search-panel>

								<div ng-cloak ng-show="data.showMap && data.mode()=='trees'" id="treeMap" ng-class="data.mode()" class="map"></div>
							</section>	<!-- }}} mainContent -->
						</div>	
					</div>

					<div class="col-sm-4 col">
						<div class="result-container">
							<section class="nav_listings" ng-if="data.mode()=='trees'">
								<div class="table-responsive">
                                    <div trees-selector ng-if="auth.isAtleast('inventory')" toggle-checked-trees="toggleCheckedTrees(opt)" selected-trees="selectedTrees" count="TFSdata.treeResultsCount"></div>

                                    <div class="tree-list-outer" id="tree-list-container">
										<table class="tree-list-container">
											<tbody>
												<tr bindonce ng-repeat="tree in trees" ng-if="tree.hide != true" id="tree-result-item-row-{{tree.treeID}}" 
														ng-mouseover="onTreeResultMouseOver(tree)" ng-mouseleave="onTreeResultMouseLeave(tree)">
													<td class="td-check">													
														<input type="checkbox" checklist-model="selectedTrees" checklist-value="tree.treeID" 
															id="tree-result-checkbox-{{tree.treeID}}">
													</td>
													<td class="td-img">
                                                        <label for="tree-result-checkbox-{{tree.treeID}}">
                                                            <div tooltip-html-unsafe="{{listingPopoverContent}}" popover-trigger="mouseenter">
                                                                <img bo-src="tree.imgSm" data-treeID='{{tree.treeID}}'
                                                                     ng-click="onTreeImageRollover(tree.treeID);" ng-mouseover="onTreeImageRollover(tree.treeID);" ng-mouseleave="onTreeImageRollout(tree.treeID);"
                                                                     data-imgMed="{{tree.imgMed}}"
                                                                     style="border:2px solid #{{colors.bg[tree.colorID]}}"/>
                                                            </div>
                                                        </label>
													</td>
													<td>
                                                        <label for="tree-result-checkbox-{{tree.treeID}}">
                                                            <h6>{{tree.commonName}}</h6>
                                                            <p>{{tree.dbhID|dbhID2Name:this}}</p>
                                                            <small><span class='recYear {{tree.history|showRecoYear:"css"}}' ng-bind-html="tree.history|showRecoYear"></span>
                                                                <span bo-text="'(ID:' + tree.treeID + ')'"></span></small>
                                                        </label>
													</td>
													<td class="td-action" style="padding: 0px;">
                                                        <label for="tree-result-checkbox-{{tree.treeID}}">
                                                            <a href='#/tree_edit/{{tree.treeID}}' bs-tooltip title="View/Edit Details" style="padding: 5px;"><i class="fa fa-pencil"></i></a>
                                                        </label>
													</td>
												</tr>
											</tbody>
											
										</table>
									</div>

                                    <div trees-selector ng-if="auth.isAtleast('inventory')" toggle-checked-trees="toggleCheckedTrees(opt)" selected-trees="selectedTrees" count="TFSdata.treeResultsCount"></div>

                                    <table class="tree-list-container" ng-if="auth.isAtleast('inventory') && trees.length">
										<tfoot>
											<tr>
												<td colspan="4">
													<button class="btn btn-block btn-red clr-white txt-bold" ng-click="addToEstimate()">Add to Estimate</button>
												</td>
											</tr>
                                            <tr>
                                                <td colspan="4">
													<button class="btn btn-default" ng-model="data.overrideTreatmentCodes" multiple max-length=0 all-none-buttons=1
															ng-options="t.code as t.treatmentType for t in initData.filters.treatments" 
															bs-select placeholder="Override Recommended Treatment" onclick="return false;">
														Treatments <span class="caret"></span>
													</button>
													<a ng-if="data.overrideTreatmentCodes.length" class='fa fa-times _red _size8 hand' style='padding-left:.2em;'
															ng-click='data.overrideTreatmentCodes=[]'></a>
                                                </td>
                                            </tr>
										</tfoot>
									</table>

								</div>
							</section>
						</div>	
					</div>

				</div>

			</div>
		</div>
	</div>
</div>

<div class="clearfix"></div>
<div ng-include="'js/trees/report.tpl.html'"></div>

</main>
